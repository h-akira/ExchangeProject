<!-- TradingView Widget BEGIN -->
<select id="currencyPairSelect">
  <option value="OANDA/USDJPY" selected>USDJPY</option>
  <option value="OANDA/EURJPY">EURJPY</option>
  <option value="OANDA/EURUSD">EURUSD</option>
  <option value="OANDA/GBPJPY">GBPJPY</option>
  <option value="OANDA/AUDJPY">AUDJPY</option>
  <option value="CAPITALCOM:DXY">DXY</option>
</select>
<select id="indicatorSelect">
  <option value="Ichimoku" selected>一目均衡表</option>
  <option value="Bollinger_SMA">BB+SMA</option>
</select>
<div class="tradingview-widget-container">
  <div id="tradingview_6feaf"></div>
  <div class="tradingview-widget-copyright"><a href="https://jp.tradingview.com/" rel="noopener nofollow" target="_blank"><span class="blue-text">TradingViewですべてのマーケットを追跡</span></a></div>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
    let currentSymbol = "OANDA:USDJPY"; // 初期値
    let currentStudy = "Ichimoku"; // 初期値
    const createWidget = (symbol, study) => {
      let studiesArray = [];
      if (study === "Ichimoku") {
        studiesArray = ["STD;Ichimoku%1Cloud"];
      } else if (study === "Bollinger_SMA") {
        studiesArray = ["STD;Bollinger_Bands", "STD;SMA"];
      }
      return new TradingView.widget({
        "width": "100%",
        "height": "700px",
        "symbol": symbol,
        "interval": "D",
        "timezone": "Asia/Tokyo",
        "theme": "light",
        "style": "1",
        "locale": "ja",
        "details": true,
        "enable_publishing": false,
        "allow_symbol_change": true,
        "studies": studiesArray,
        "container_id": "tradingview_6feaf"
      });
    };
    let widget = createWidget(currentSymbol, currentStudy);
  </script>
</div>
<!-- TradingView Widget END -->
